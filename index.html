<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PotolokForLife</title>
    
    <!-- PWA –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–∞-—Ç–µ–≥–∏ -->
    <meta name="theme-color" content="#3498db">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- –ò–∫–æ–Ω–∫–∏ -->
    <link rel="icon" href="icon.png">
    <link rel="apple-touch-icon" href="icon.png">
    
    <!-- –°—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="style.css">
    
    <!-- PWA Builder —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç —ç—Ç–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ -->
    <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- –®–∞–ø–∫–∞ -->
        <header>
            <div class="logo">
                <h1>üè† PotolokForLife</h1>
                <p>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ø–æ—Ç–æ–ª–∫–æ–≤</p>
            </div>
        </header>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ -->
        <main>
            <div class="card">
                <h2>üìè –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</h2>
                
                <div class="input-group">
                    <label>–ü–ª–æ—â–∞–¥—å (–º¬≤):</label>
                    <input type="number" id="area" min="1" placeholder="0" value="10">
                </div>
                
                <div class="input-group">
                    <label>–°–∏—Å—Ç–µ–º–∞ –º–æ–Ω—Ç–∞–∂–∞:</label>
                    <select id="system">
                        <option value="garpun">–ì–∞—Ä–ø—É–Ω–Ω–∞—è (+–≤—Å—Ç–∞–≤–∫–∞)</option>
                        <option value="garpun_plus10">–ì–∞—Ä–ø—É–Ω–Ω–∞—è (+10%)</option>
                        <option value="shadow">–¢–µ–Ω–µ–≤–æ–π –ø–æ—Ç–æ–ª–æ–∫</option>
                    </select>
                </div>
            </div>

            <!-- –ú–∞—Ç–µ—Ä–∏–∞–ª—ã -->
            <div class="card">
                <h2>üèóÔ∏è –û—Å–Ω–æ–≤–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã</h2>
                <div id="materialsList"></div>
            </div>

            <!-- –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ -->
            <div class="card">
                <h2>üí° –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ</h2>
                <div id="equipmentList"></div>
            </div>

            <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç -->
            <div class="card result-card" id="resultCard" style="display: none;">
                <h2>üí∞ –†–µ–∑—É–ª—å—Ç–∞—Ç</h2>
                <div id="resultContent"></div>
                <div class="buttons">
                    <button class="btn" onclick="saveToPDF()">üìÑ PDF</button>
                    <button class="btn" onclick="shareViaTelegram()">üì± Telegram</button>
                    <button class="btn" onclick="shareViaWhatsApp()">üí¨ WhatsApp</button>
                </div>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
            <div class="actions">
                <button class="btn primary" onclick="calculate()">üìä –†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
                <button class="btn" onclick="resetForm()">üîÑ –°–±—Ä–æ—Å–∏—Ç—å</button>
            </div>
        </main>

        <!-- –ò—Å—Ç–æ—Ä–∏—è -->
        <section class="history">
            <h3>üìã –ò—Å—Ç–æ—Ä–∏—è</h3>
            <div id="historyList"></div>
        </section>

        <!-- –§—É—Ç–µ—Ä -->
        <footer>
            <p>¬© PotolokForLife ‚Ä¢ 8(977)5311099</p>
        </footer>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º —Å–∫—Ä–∏–ø—Ç—ã -->
    <script src="data.js"></script>
    <script src="script.js"></script>
    
    <!-- Service Worker —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(() => console.log('‚úÖ SW –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω'))
                    .catch(err => console.log('‚ùå –û—à–∏–±–∫–∞ SW:', err));
            });
        }
        
        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PWA
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            showInstallButton();
        });
        
        function showInstallButton() {
            if (deferredPrompt) {
                const installBtn = document.createElement('button');
                installBtn.innerHTML = 'üì± –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å';
                installBtn.className = 'install-btn';
                installBtn.onclick = async () => {
                    deferredPrompt.prompt();
                    const { outcome } = await deferredPrompt.userChoice;
                    installBtn.remove();
                };
                document.querySelector('header').appendChild(installBtn);
            }
        }
    </script>
</body>
</html>
