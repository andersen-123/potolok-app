<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#3498db" />
    <meta name="description" content="–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –Ω–∞—Ç—è–∂–Ω—ã—Ö –ø–æ—Ç–æ–ª–∫–æ–≤" />
    
    <!-- PWA –º–∞–Ω–∏—Ñ–µ—Å—Ç -->
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" crossorigin="use-credentials">
    
    <!-- –ò–∫–æ–Ω–∫–∏ -->
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/icon-192.png" />
    
    <title>PotolokForLife - –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –Ω–∞—Ç—è–∂–Ω—ã—Ö –ø–æ—Ç–æ–ª–∫–æ–≤</title>
</head>
<body>
    <noscript>
        <div style="padding: 20px; text-align: center;">
            <h2>–î–ª—è —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ç—Ä–µ–±—É–µ—Ç—Å—è JavaScript</h2>
            <p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–∫–ª—é—á–∏—Ç–µ JavaScript –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –±—Ä–∞—É–∑–µ—Ä–∞</p>
        </div>
    </noscript>
    <div id="root"></div>
    
    <!-- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Service Worker -->
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          const swUrl = `${process.env.PUBLIC_URL || ''}/service-worker.js`;
          
          navigator.serviceWorker.register(swUrl)
            .then(registration => {
              console.log('‚úÖ Service Worker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω:', registration);
              
              // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
              registration.onupdatefound = () => {
                const installingWorker = registration.installing;
                if (installingWorker == null) return;
                
                installingWorker.onstatechange = () => {
                  if (installingWorker.state === 'installed') {
                    if (navigator.serviceWorker.controller) {
                      console.log('üîÑ –ù–æ–≤—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –¥–æ—Å—Ç—É–ø–µ–Ω. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.');
                    } else {
                      console.log('‚úÖ –ö–æ–Ω—Ç–µ–Ω—Ç –∑–∞–∫—ç—à–∏—Ä–æ–≤–∞–Ω –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω —Ä–∞–±–æ—Ç—ã.');
                    }
                  }
                };
              };
            })
            .catch(error => {
              console.error('‚ùå –û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ Service Worker:', error);
            });
        });
      }
      
      // –ü—Ä–æ–≤–µ—Ä–∫–∞ PWA –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
      if (window.matchMedia('(display-mode: standalone)').matches) {
        console.log('üì± –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ –≤ standalone —Ä–µ–∂–∏–º–µ');
      }
    </script>
</body>
</html>
